extends ../layout

block content
    p
        | Для управления своим отрядом вам нужно написать тактические функции для своих юнитов.
        | Тактическая функция вызывается на каждый шаг юнита. Вызов таких функций как move(), attack()
        | не дает немедленных результатов а ставит действие в очередь. Все запланированные действия
        | будут выполнены после обработки всех тактических функций всех юнитов на карте.
    h2 Tactic API:
    ul
        li unit self() - данные о текущем юните
        li unit nearest() - ближайший живой враг
        li bool canAttack(unit) - проверить в зоне досигаемости ли unit
        li float direction(unit) - угол на который нужно повернуться, чтобы смотреть на unit
        li turn(float) - повернуться на заданный угол (добавляет действие в очередь)
        li float distance(unit) - растояние до unit
        li move(distance) - двигаться вперед distance пикселей (добавляет действие в очередь)
        li attack(unit) - атаковать unit, если unit в зоне досягаемости (добавляет действие в очередь)
        li unit|null target() - результат этой функции может быть задан стратегической функцией. Смотрите описание setTarget(unit, target) ниже
        li queueSize() - кол-во действий в очереди
        li resetQueue() - сбросить очередь действий
        li log(mixed) - вывести переменную в консоль
        li store - переменная, в которой вы можете сохранить свои данные между запусками
    h2 Strategy API:
    p
        | В дополнение к тактическим функциям вы так же можете написать одну стратегическую функцию
        | для всего отряда. В этой функции доступны координаты всех врагов, так же из стратегической
        | фунции вы можете задать цели своим юнитам. Стратегическая функция отряда выполняется перед
        | тактическими функциями юнитов.
    ul
        li array confederates() - массив своих живых юнитов
        li array enemies() - массив живых юнитов врага
        li setTarget(unit, target) - задать unit цель target, которую unit сможет получить функцией target()
        li log(mixed) - вывести переменную в консоль
        li store - переменная, в которой вы можете сохранить свои данные между запусками
    h2 Свойства юнтов:
    ul
        li id
        li lives
        li x
        li y
    h2 Подсказки:
    p
        | Объявление неинициализированных переменных с помощью var в главном контексте тактик и стратегий
        | не рекомендуется, потому что, при отладки в браузере, такие переменные не будут сохранятся между шагами,
        | но во время исполнения вашей тактики или стратегии на сервере значения переменных будет сохранено между шагами.
        | Во избежание трудноуловимых багов используйте переменную store, чтобы сохранить данные между шагами,
        | либо всегда инициализируйте объявленные переменные.